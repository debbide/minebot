// ==UserScript==
// @name         Angara Host - è‡ªåŠ¨æŒ‚æœºé˜²æ‰çº¿åŠ©æ‰‹
// @namespace    http://tampermonkey.net/
// @version      1.1
// @description  è‡ªåŠ¨æ£€æµ‹ AFK çŠ¶æ€ï¼Œæ¨¡æ‹Ÿå¿ƒè·³é˜²æ­¢æ‰çº¿ï¼Œå¹¶åœ¨æ‰çº¿æ—¶è‡ªåŠ¨é‡ç™»
// @author       Antigravity
// @match        *://*.worldofangara.fun/*
// @run-at       document-end
// @grant        none
// ==/UserScript==
(function () {
    'use strict';
    // ================= é…ç½®åŒºåŸŸ =================
    const CONFIG = {
        AFK_URL: '/earn/afk',      // æŒ‚æœºé¡µé¢çš„ç²¾å‡†è·¯å¾„
        CHECK_INTERVAL: 10000,     // çŠ¶æ€æ£€æŸ¥é¢‘ç‡ (10ç§’)
        HEARTBEAT_INTERVAL: 60000, // å¿ƒè·³é¢‘ç‡ (1åˆ†é’Ÿ)
    };
    console.log("%c[Angara AFK Helper] è„šæœ¬å·²å¯åŠ¨", "color: #ff4500; font-weight: bold;");
    // --- çŠ¶æ€é¢æ¿ (å‚è€ƒç”¨æˆ·å–œå¥½çš„å³ä¸‹è§’æ ·å¼) ---
    const infoBox = document.createElement('div');
    Object.assign(infoBox.style, {
        position: 'fixed', bottom: '20px', right: '20px', padding: '12px 16px',
        backgroundColor: 'rgba(0, 0, 0, 0.9)', color: '#fff', borderRadius: '8px',
        zIndex: '999999', fontFamily: 'monospace', fontSize: '12px',
        borderLeft: '5px solid #00ff00', boxShadow: '0 4px 15px rgba(0,0,0,0.6)',
        minWidth: '260px', pointerEvents: 'none'
    });
    infoBox.innerHTML = 'è„šæœ¬ v1.4 åˆå§‹åŒ–ä¸­...';
    document.body.appendChild(infoBox);
    // --- çŠ¶æ€æ›´æ–°å‡½æ•° ---
    function updateHUD(color, status, detail, action) {
        infoBox.style.borderLeftColor = color;
        infoBox.innerHTML = `
            <div style="font-size:14px; font-weight:bold; color:${color}; margin-bottom:6px;">ğŸš€ ${status}</div>
            <div style="color:#bbb; margin-bottom:4px;">ğŸ“Š çŠ¶æ€: <span style="color:#fff">${detail}</span></div>
            <div style="color:#888; border-top:1px solid #444; padding-top:4px; font-size:11px;">
               ğŸ¤– åŠ¨ä½œ: <span style="color:${color}">${action}</span>
            </div>
        `;
    }
    // --- ç‚¹å‡»è§¦å‘å‡½æ•° ---
    function triggerClick(element, name) {
        if (!element) return;
        updateHUD("#ffa500", "è§¦å‘ç‚¹å‡»", name, "æ­£åœ¨æ¨¡æ‹Ÿç‚¹å‡»åŠ¨ä½œ...");
        const opts = { bubbles: true, cancelable: true, view: window };
        element.dispatchEvent(new MouseEvent('mousedown', opts));
        element.dispatchEvent(new MouseEvent('mouseup', opts));
        element.click();
    }
    // --- æ ¸å¿ƒå¿ƒè·³ (ç»´æŒä¼šè¯) ---
    setInterval(() => {
        window.scrollBy(0, 2);
        setTimeout(() => window.scrollBy(0, -2), 500);
        console.log("Keep-alive Heartbeat sent.");
    }, CONFIG.HEARTBEAT_INTERVAL);
    // --- ä¸»å¾ªç¯ ---
    function mainLoop() {
        const currentUrl = window.location.href;
        // 1. ç™»å½•é¡µæ£€æµ‹
        if (currentUrl.includes('login')) {
            updateHUD("#ff4500", "ç™»å½•å¤±æ•ˆ", "å½“å‰å¤„äºç™»å½•é¡µé¢", "è¯·æ‰‹åŠ¨è¾“å…¥è´¦å·å¯†ç ç™»å½•");
            return;
        }
        // 2. æŒ‚æœºé¡µè·³è½¬æ£€æµ‹
        if (!currentUrl.includes(CONFIG.AFK_URL)) {
            updateHUD("#ffa500", "ä¸åœ¨æŒ‚æœºé¡µ", "å‡†å¤‡è·³è½¬åˆ° AFK é¡µé¢", "è‡ªåŠ¨è·³è½¬ä¸­...");
            const afkLink = Array.from(document.querySelectorAll('a')).find(a => a.innerText.includes('AFK Rewards'));
            if (afkLink) {
                afkLink.click();
            } else if (!currentUrl.includes('/earn')) {
                window.location.pathname = CONFIG.AFK_URL;
            }
            return;
        }
        // 3. æŒ‚æœºæŒ‰é’®æ£€æµ‹
        const startBtn = Array.from(document.querySelectorAll('button')).find(b =>
            b.innerText.toLowerCase().includes('start afk') ||
            b.innerText.toLowerCase().includes('begin afk')
        );
        const statusText = document.body.innerText.toLowerCase();
        const isActive = statusText.includes('status: active') || statusText.includes('earning coins');
        if (isActive) {
            updateHUD("#00ff00", "è¿è¡Œä¸­", "AFK Status: Active", "é™é»˜ç›‘æ§ä¸­ (æ¯60så¿ƒè·³)");
        } else if (startBtn) {
            updateHUD("#ff00ff", "æŒ‚æœºåœæ­¢", "å‘ç°å¼€å§‹æŒ‰é’®", "ç‚¹å‡» Start AFK...");
            triggerClick(startBtn, "Start AFK æŒ‰é’®");
        } else {
            updateHUD("#888", "åˆ†æä¸­", "ç­‰å¾…å…³é”®å…ƒç´ åŠ è½½", "æ­£åœ¨æ‰«æé¡µé¢å†…å®¹...");
        }
    }
    setInterval(mainLoop, CONFIG.CHECK_INTERVAL);
    console.log("Angara Host Helper v1.4 å·²å¯åŠ¨");
})();

Comment
Ctrl+Alt+M
